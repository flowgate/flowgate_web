DROP TABLE analysis;
CREATE TABLE analysis ( analysisID bigint NOT NULL AUTO_INCREMENT, datasetID bigint NOT NULL, protocolID bigint, analysisName varchar(512), dataInputFileID bigint NOT NULL, userIdx bigint NOT NULL, PRIMARY KEY (analysisID), CONSTRAINT analysis_fk1 FOREIGN KEY (datasetID) REFERENCES dataset (datasetID) , CONSTRAINT analysis_fk2 FOREIGN KEY (protocolID) REFERENCES protocol (protocolID) , CONSTRAINT analysis_fk3 FOREIGN KEY (dataInputFileID) REFERENCES dataInputFile (dataInputFileID), INDEX analysis_fk1 (datasetID), INDEX analysis_fk2 (protocolID), INDEX analysis_fk3 (dataInputFileID) ) ENGINE=InnoDB DEFAULT CHARSET=latin1;
DROP TABLE dataInputFile;
CREATE TABLE dataInputFile ( dataInputFileID bigint NOT NULL AUTO_INCREMENT, datasetID bigint, reagentPanelID bigint, dataInputFileName varchar(512) NOT NULL, dataPath varchar(1024), userIdx bigint NOT NULL, PRIMARY KEY (dataInputFileID), CONSTRAINT dataInputFile_fk1 FOREIGN KEY (datasetID) REFERENCES dataset (datasetID) , CONSTRAINT dataInputFile_fk2 FOREIGN KEY (userIdx) REFERENCES user (userIdx) , CONSTRAINT dataInputFile_fk3 FOREIGN KEY (reagentPanelID) REFERENCES reagentPanel (reagentPanelID), INDEX dataInputFile_fk1 (datasetID), INDEX dataInputFile_fk3 (reagentPanelID), INDEX dataInputFile_fk2 (userIdx) ) ENGINE=InnoDB DEFAULT CHARSET=latin1;
DROP TABLE dataset;
CREATE TABLE dataset ( datasetID bigint NOT NULL AUTO_INCREMENT, datasetName varchar(512) NOT NULL, reagentPanelName varchar(512), experimentID bigint, userIdx bigint NOT NULL, datasetDesc varchar(1024), PRIMARY KEY (datasetID), CONSTRAINT dataset_fk1 FOREIGN KEY (experimentID) REFERENCES experiment (experimentID) , CONSTRAINT dataset_fk2 FOREIGN KEY (userIdx) REFERENCES user (userIdx), INDEX dataset_fk1 (experimentID), INDEX dataset_fk2 (userIdx) ) ENGINE=InnoDB DEFAULT CHARSET=latin1;
DROP TABLE experiment;
CREATE TABLE experiment ( experimentID bigint NOT NULL AUTO_INCREMENT, experimentHypothesis varchar(2048), experimentMeta varchar(512), userIdx bigint NOT NULL, PRIMARY KEY (experimentID), CONSTRAINT experiment_fk1 FOREIGN KEY (userIdx) REFERENCES user (userIdx), INDEX experiment_fk1 (userIdx) ) ENGINE=InnoDB DEFAULT CHARSET=latin1;
DROP TABLE protocol;
CREATE TABLE protocol ( protocolID bigint NOT NULL, protocolName varchar(512) NOT NULL, PRIMARY KEY (protocolID) ) ENGINE=InnoDB DEFAULT CHARSET=latin1;
DROP TABLE protocolSteps;
CREATE TABLE protocolSteps ( psID bigint NOT NULL AUTO_INCREMENT, protocolID bigint, protocolMethodName varchar(512), protocolMethodOrder bigint, protocolParamID bigint, PRIMARY KEY (psID), CONSTRAINT protocolSteps_fk1 FOREIGN KEY (protocolID) REFERENCES protocol (protocolID), INDEX protocolSteps_fk1 (protocolID) ) ENGINE=InnoDB DEFAULT CHARSET=latin1;
DROP TABLE reagentPanel;
CREATE TABLE reagentPanel ( reagentPanelID bigint NOT NULL AUTO_INCREMENT, reagentPanelName varchar(512), PRIMARY KEY (reagentPanelID) ) ENGINE=InnoDB DEFAULT CHARSET=latin1;
DROP TABLE reagents;
CREATE TABLE reagents ( reagentID bigint NOT NULL AUTO_INCREMENT, reagentPanelID bigint, reagentPanelName varchar(512), markerName varchar(512), dyeName varchar(512), transformName varchar(512), inputMin varchar(512), inputMax varchar(512), outputMin varchar(512), outputMax varchar(512), PRIMARY KEY (reagentID), CONSTRAINT reagents_fk1 FOREIGN KEY (reagentPanelID) REFERENCES reagentPanel (reagentPanelID), INDEX reagents_fk1 (reagentPanelID) ) ENGINE=InnoDB DEFAULT CHARSET=latin1;
DROP TABLE resultImages;
CREATE TABLE resultImages ( imageID bigint NOT NULL AUTO_INCREMENT, analysisID bigint, datasetID bigint, datafileInputID bigint, resultImagePath varchar(1024), resultImageFileName varchar(512), resultImageType varchar(512), axis1 varchar(512), axis2 varchar(512), iBW int(1), dataScopeDesc varchar(512), PRIMARY KEY (imageID), CONSTRAINT resultImages_fk1 FOREIGN KEY (analysisID) REFERENCES analysis (analysisID) , CONSTRAINT resultImages_fk2 FOREIGN KEY (datafileInputID) REFERENCES dataInputFile (dataInputFileID) , CONSTRAINT resultImages_fk3 FOREIGN KEY (datasetID) REFERENCES dataset (datasetID), INDEX resultImages_fk1 (analysisID), INDEX resultImages_fk2 (datafileInputID), INDEX resultImages_fk3 (datasetID) ) ENGINE=InnoDB DEFAULT CHARSET=latin1;
DROP TABLE resultsNumerical;
CREATE TABLE resultsNumerical ( resultID bigint NOT NULL AUTO_INCREMENT, analysisID bigint, datasetID bigint, datafileInputID bigint, protocolID bigint, attribute varchar(512), value varchar(512), PRIMARY KEY (resultID), CONSTRAINT resultsNumerical_fk1 FOREIGN KEY (analysisID) REFERENCES analysis (analysisID) , CONSTRAINT resultsNumerical_fk2 FOREIGN KEY (datasetID) REFERENCES dataset (datasetID) , CONSTRAINT resultsNumerical_fk3 FOREIGN KEY (datafileInputID) REFERENCES dataInputFile (dataInputFileID) , CONSTRAINT resultsNumerical_fk4 FOREIGN KEY (protocolID) REFERENCES protocol (protocolID), INDEX resultsNumerical_fk1 (analysisID), INDEX resultsNumerical_fk2 (datasetID), INDEX resultsNumerical_fk3 (datafileInputID), INDEX resultsNumerical_fk4 (protocolID) ) ENGINE=InnoDB DEFAULT CHARSET=latin1;
DROP TABLE user;
CREATE TABLE user ( userIdx bigint NOT NULL AUTO_INCREMENT, userID varchar(512) NOT NULL, userName varchar(512) NOT NULL, userPass varchar(512) NOT NULL, userEmail varchar(512) NOT NULL, userAffil varchar(512), PRIMARY KEY (userIdx, userID) ) ENGINE=InnoDB DEFAULT CHARSET=latin1;
