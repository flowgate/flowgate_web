<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>mockup with bootstrap</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style type="text/css">
    body {
        padding-top: 60px;
    }

    #fileNav {
      height: 100%;
      min-height: 100%;
    }

    html, body {
      height: 90%;
    }

    .fill { 
      min-height: 100%;
      height: 100%;
    }

    #overviewTable td { border: 3px white solid; }
    #overviewTable th { 
        font-family: Verdana,Arial,Helvetica,sans-serif;
        font-weight: normal;
        font-size: .9em;
        font-color: black;
        text-align: left;
        color: black;
        margin: 0;
        padding: 5px 12px 5px 12px;
        vertical-align: top;
        border: 3px solid #FFF;
        background-color: ##f5f5f5;
    }
    #overviewTbody img {
      width: 85px;
      height: 85px;
    }
    </style>
    <link href="bootstrap.min.css" rel="stylesheet">
    <link href="jqueryFileTree.css" rel="stylesheet">
</head>

<body>

    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
          <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
        </a>
        <a class="brand" href="#">gofcm</a>
        <div class="nav-collapse collapse">
            <p class="navbar-text pull-right">
              Logged in as <a href="#" class="navbar-link">Username</a>            
          </p>
          <ul class="nav">
              <li class="active"><a href="#">Home</a></li>
              <li><a href="#about">About</a></li>
              <li><a href="#contact">Contact</a></li>
          </ul>
      </div>
      <!--/.nav-collapse -->
  </div>
</div>
</div>
<div class="container-fluid fill">
  <div class="row-fluid fill">
    <div class="span2 fill">
      <div class="well" id="fileNav" style="overflow:auto;"></div>
    </div>
    <div class="span10">
      <div class="hero-unit">
        <h4>Details</h1>
        <p></p>
      </div>
      <div class="hero-unit">
        <div class="row-fluid">
          <div class="span3">
            <h4 id="overviewH4">Overview</h4>
          </div>
          <div class="span4">
            <select id="populSelect"></select>  
          </div>
        </div>
        <div id="flock_main">
          <div id="flock_content">
            <table id="overviewTable">
              <thead id="overviewThead"></thead>
              <tbody id="overviewTbody"></tbody>
            </table>
          </div>
        </div>
      </div>
      </div>  
    </div>
  </div>
</div>
    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="jquery-1.10.2.min.js"></script>
    <script src="bootstrap.min.js"></script>
    <script src="jqueryFileTree.js"></script>
    <script>
      $(document).ready(function() {
        //_utils.loadOverview(1);
        $('#fileNav').fileTree({
            root: '/export/gofcm/Tasks/',
            script: 'jqueryFileTree.php',
            expandSpeed: 1000,
            collapseSpeed: 1000,
            multiFolder: false
        }, function(file) {
            alert(file);
        });

        
        $.ajax({
          url: 'getOverviewResults.php?taskId=51f6d35da9d945c814b49d4c&type=color'
        }).done(function ( data ) {
          if(data) {
            data = $.parseJSON(data);
          }
          var imgHtml = '<img src="$imgPath$"/>';
          if(data && data.columns && data.taskDir && data.type) {
            var cols = data.columns, taskDir = data.taskDir, type = data.type, thead='', tbody='';
            thead = '<tr><th id="name"></th>';
            for(var i=0;i<cols.length;i++) {
              thead+='<th id="'+cols[i]+'">'+cols[i]+'</th>';
              tbody+='<tr><th id="'+cols[i]+'_'+cols[i]+'" headers="name">'+cols[i]+'</th>';
              for(var j=0;j<cols.length;j++) {
                tbody+='<td headers="'+cols[j]+' '+cols[i]+'">'
                  +imgHtml.replace("$imgPath$", taskDir+cols[j]+"."+cols[i]+'.all.'+type+'.png');
                  +'</td>'
              }
              tbody+='</tr>';
            }
            thead+='</tr>';
            $('#overviewThead').html(thead);
            $('#overviewTbody').html(tbody);
          }
        });
        
      });

      /*
      var _utils = {
        loadOverview: function(type) {
          var _this = this;
          Ext.get('flock_main').mask("Loading ...",'x-mask-loading');
          var conn = new Ext.data.Connection({timeout: 120000});
          conn.request( {
              url: 'getOverviewResults.php?taskId=51f6d35da9d945c814b49d4c&fileInputId=51f6d331a9d945697e8fc9c0&type=color',
              success: function(resp,opt) {
                  overviewConfig = Ext.util.JSON.decode(resp.responseText);
                  _utils.buildOverviewGrid();
                  Ext.get('flock_main').unmask();
              },
              failure: function(resp,opt) {
                  Ext.get('flock_main').dom.innerHTML = '<span style="color:red;">Failure to Load the Overview Screen</span>';
                  Ext.get('flock_main').unmask();
              }
          });
      },
      buildOverviewGrid: function() { //Build the grid to display the marker by marker images
          var store = new Ext.data.JsonStore({
              data: overviewConfig,
              root: 'rows',
              fields: overviewConfig.fields
          });

          var overviewGrid = new Ext.grid.LockingGridPanel({
              title: 'Click on any thumbnail image to view and adjust populations',
              store: store,
              frame:false,
              height: 600,
              enableColumnMove: false,
              viewConfig: {
                  forceFit: false
              },
              columns: overviewConfig.columns,
              sm: new Ext.grid.CellSelectionModel({singleSelect:true,
                  listeners: {
                      cellselect: {
                          fn: function(sm,rowIndex,colIndex) {
                              var cell = sm.getSelectedCell();
                              var record = store.getAt(cell[0]);
                              var fieldName = overviewGrid.getColumnModel().getDataIndex(cell[1]);
                              var data = record.get(fieldName).split(";");
                              //loadMarkerByMarkerView(data[1],data[3]);
                              // Make sure a valid cell was clicked.
                              if (data[1] == undefined || data[1] == data[3]) {
                                  return;
                              }
                          }
                      }
                  }
              })
          });
          overviewGrid.render("flock_content");
      }  
      } 
      */

    </script>
</body>
</html>
